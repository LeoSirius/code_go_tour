{"version":3,"sources":["page/header.js","page/sider.js","page/content.js","page/toc.js","api.js","page/home.js","page/login.js","util.js","page/admin/repo-header.js","models/admin-repo.js","page/admin/moddal-update-repo.js","page/admin/repos.js","page/admin/admin.js","App.js","reportWebVitals.js","index.js"],"names":["Header","Layout","MyHeader","props","repoList","this","className","length","theme","mode","defaultSelectedKeys","String","id","map","repo","Item","onClick","updateCurRepoID","name","React","Component","SubMenu","Menu","Sider","Content","MySider","selectFile","dirent","updateCurFilePath","path_in_repo","renderTree","direntTree","filter","item","is_dir","title","children","state","console","log","width","defaultOpenKeys","style","height","borderRight","MyContent","flatten","text","child","Children","toArray","reduce","HeadingRenderer","slug","encodeURIComponent","createElement","level","fileContent","padding","margin","minHeight","window","innerHeight","backgroundColor","source","plugins","gfm","renderers","heading","code","language","value","a11yDark","showLineNumbers","showInlineLineNumbers","Link","Anchor","TOC","renderTOC","toc","href","baseURL","axiosInstance","axios","create","api","login","username","password","next","url","form","FormData","append","post","adminListRepos","page","pageSize","get","adminAddRepo","repoURL","adminUpdateRepo","put","adminDeleteRepo","delete","listRepos","getRepoDirentTree","getRepoFile","path","params","getGithubMarkdownRendered","fileString","data","Footer","Home","updateContent","curRepoID","curFilePath","then","res","newContent","content","endsWith","tmpArr","split","itemWithChildren","push","setState","updateDirentTree","dirent_tree","newPath","newID","repo_list","catch","e","textAlign","layout","labelCol","span","wrapperCol","tailLayout","offset","Login","initialValues","remember","onFinish","values","URLSearchParams","location","search","onFinishFailed","errorInfo","marginTop","label","rules","required","message","Password","type","htmlType","util","getErrMsg","error","response","statusText","useState","visible","setVisible","confirmLoading","setConfirmLoading","repoName","setRepoName","setRepoURL","errMsg","setErrMsg","paddingLeft","onOk","addRepo","notification","success","onCancel","onChange","target","placeholder","marginBottom","AdminRepo","obj","Object","key","ModalUpdateRepo","updateRepo","repoToUpdate","handleNameChange","handleRepoURLChange","Column","Table","Repos","deleteRepo","newRepoList","newRepo","repos","forEach","isShowUpdateRepo","modalUpdateConfirmLoading","cancelUpdateModal","showModalUpdateRepo","paddingTop","dataSource","pagination","dataIndex","render","record","size","Admin","collapsed","onCollapse","collapsible","icon","AppstoreAddOutlined","App","route","pathname","addEventListener","Child","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.ea7e1835.chunk.js","sourcesContent":["import React from 'react';\n\nimport { Layout, Menu } from 'antd';\n\nconst { Header } = Layout;\n\n\nclass MyHeader extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { repoList } = this.props;\n    return (\n      <Header className=\"header\">\n        <div className=\"logo\" />\n        {repoList.length > 0 && \n          <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={[String(repoList[0].id)]}>\n            {repoList.map(repo => \n              <Menu.Item \n                key={repo.id}\n                onClick={() => this.props.updateCurRepoID(repo.id)}\n              >{repo.name}\n              </Menu.Item>\n             )}\n          </Menu>\n        }\n      </Header>\n    )\n  }\n}\n\nexport default MyHeader;","import React from 'react';\n\nimport { Layout, Menu, Breadcrumb } from 'antd';\n\nconst { SubMenu } = Menu;\nconst { Header, Content, Sider } = Layout;\n\nclass MySider extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      direntTree: [],\n    }\n  }\n\n  componentDidMount() {\n\n  }\n\n  selectFile = (dirent) => {\n    this.props.updateCurFilePath(dirent.path_in_repo)\n  }\n\n  renderTree = (direntTree) => {\n    return direntTree.filter(item => {\n      if (item.name[0] === '.') return false;\n      return true;\n    }).map(item => {\n      if (item.is_dir) {\n        return (\n          <SubMenu key={item.path_in_repo} title={item.name}>\n            {item.children && item.children.length > 0 && this.renderTree(item.children)}\n          </SubMenu>\n        );\n      }\n      return <Menu.Item\n              key={item.path_in_repo}\n              onClick={() => this.selectFile(item)}\n              >{item.name}</Menu.Item>;\n    })\n  }\n\n  render() {\n    let { direntTree } = this.props;\n    console.log('direntTree = ', direntTree)\n    return (\n      <Sider width={300} className=\"site-layout-background\">\n        <Menu\n          mode=\"inline\"\n          defaultSelectedKeys={['1']}\n          defaultOpenKeys={['sub1']}\n          style={{ height: '100%', borderRight: 0 }}\n        >\n          {direntTree.length > 0 && this.renderTree(direntTree)}\n        </Menu>\n      </Sider>\n    )\n  }\n}\n\nexport default MySider;","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport { Layout, Menu } from 'antd';\n// import remark from 'react-markdown';\n// import toc from 'remark-toc';\nimport {Prism as SyntaxHighlighter} from 'react-syntax-highlighter'\nimport {a11yDark} from 'react-syntax-highlighter/dist/esm/styles/prism';\n\n// var remark = require('remark');\n// var toc = require('remark-toc');\n\nimport '../../src/css/markdown/github-markdown.css';\n\nconst { SubMenu } = Menu;\nconst { Header, Content, Sider } = Layout;\n\n\n\nclass MyContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n  }\n\n  flatten = (text, child) => {\n    return typeof child === 'string'\n      ? text + child\n      : React.Children.toArray(child.props.children).reduce(this.flatten, text)\n  }\n  \n  HeadingRenderer = (props) => {\n    var children = React.Children.toArray(props.children)\n    var text = children.reduce(this.flatten, '')\n    let slug = encodeURIComponent(text);\n    return React.createElement('h' + props.level, {id: slug}, props.children)\n  }\n\n  render() {\n    let { fileContent } = this.props;\n    // let { fileContent } = this.state;\n    \n    return (\n      <Content\n      className=\"site-layout-background\"\n      style={{\n        padding: 24,\n        margin: 0,\n        minHeight: window.innerHeight,\n        backgroundColor: \"white\",\n      }}\n    >\n      <ReactMarkdown className=\"markdown-body\"\n        source={fileContent}\n        plugins={[gfm]}\n        renderers={{\n          heading: this.HeadingRenderer,\n          code: ({language, value}) => {\n            return <SyntaxHighlighter\n                    style={a11yDark}\n                    language={language}\n                    children={value}\n                    showLineNumbers={true}\n                    showInlineLineNumbers={true}\n                   />\n          }\n        }}\n      />\n    </Content>\n    )\n  }\n}\n\nexport default MyContent;","import React from 'react';\n\nimport { Layout, Menu, Anchor } from 'antd';\n\nconst { Sider } = Layout;\nconst { Link } = Anchor;\n\nclass TOC extends React.Component {\n  constructor(props) {\n    super(props);\n    // this.state = {\n    // }\n  }\n\n  componentDidMount() {\n\n  }\n\n\n  renderTOC = (toc)=> {\n    return toc.map(item => {\n      if (item.children && item.children.length > 0) {\n        return (\n          <Link href={\"#\"+encodeURIComponent(item.name)} title={item.name}>\n            {this.renderTOC(item.children)}\n          </Link>\n        )\n      }\n      return <Link href={\"#\"+encodeURIComponent(item.name)} title={item.name}/>\n    })\n  }\n\n  render() {\n    let { toc } = this.props;\n    return (\n      <Sider width={200} className=\"site-layout-background\">\n        <Menu\n          mode=\"inline\"\n          defaultSelectedKeys={['1']}\n          defaultOpenKeys={['sub1']}\n          style={{ height: '100%', borderRight: 0 }}\n        >\n          <Anchor>\n            {this.renderTOC(toc)}\n          </Anchor>\n        </Menu>\n      </Sider>\n    )\n  }\n}\n\nexport default TOC;","import axios from 'axios';\nimport FormData from 'form-data';\n\nconst baseURL = 'http://39.106.229.224'\nconst axiosInstance = axios.create();\nconst api = {\n\n  login: (username, password, next) => {\n    const url = baseURL + '/login2?next=' + next;\n    let form = new FormData();\n    form.append('username', username);\n    form.append('password', password);\n    return axiosInstance.post(url, form);\n  },\n\n  adminListRepos: (page, pageSize) => {\n    const url = baseURL + '/api/v1/admin/repos';\n    return axiosInstance.get(url);\n  },\n\n  adminAddRepo: (name, repoURL) => {\n    const url = baseURL + '/api/v1/admin/repos';\n    let form = new FormData();\n    form.append('name', name);\n    form.append('url', repoURL);\n    return axiosInstance.post(url, form);\n  },\n\n  adminUpdateRepo: (id, name, repoURL) => {\n    const url = baseURL + '/api/v1/admin/repos/' + id;\n    let form = new FormData();\n    if (name !== '') form.append('name', name);\n    if (repoURL !== '') form.append('url', repoURL);\n    return axiosInstance.put(url, form);\n  },\n\n  adminDeleteRepo: (id) => {\n    const url = baseURL + '/api/v1/admin/repos/' + id;\n    return axiosInstance.delete(url);\n  },\n\n  listRepos: () => {\n    const url = baseURL + '/api/v1/repos/';\n    return axiosInstance.get(url);\n  },\n\n  getRepoDirentTree: (id) => {\n    const url = baseURL + '/api/v1/repos/' + id + '/dirent-tree';\n    return axiosInstance.get(url);\n  },\n\n  getRepoFile: (id, path) => {\n    const url = baseURL + '/api/v1/repos/' + id + '/file';\n    let params = {\n      path: path,\n    }\n    return axiosInstance.get(url, {params:params});\n  },\n\n  getGithubMarkdownRendered: (fileString) => {\n    console.log('fileString = ', fileString)\n    const url = 'https://api.github.com/markdown';\n    let data = {\n      'text': fileString\n    }\n    return axiosInstance.post(url, data);\n  }\n}\n\nexport default api;","\nimport React from 'react';\nimport { Layout } from 'antd';\nimport MyHeader from './header';\nimport MySider from './sider';\nimport MyContent from './content';\nimport TOC from './toc';\nimport api from '../api';\n\nconst { Footer } = Layout;\n\n\nclass Home extends React.Component{\n  \n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n      curRepoID: 0,\n      curFilePath: 'README.md',\n      direntTree: [],\n      toc: [],\n    };\n  }\n\n  componentDidMount() {\n    api.listRepos().then(res => {\n      this.setState({\n        repoList: res.data.repo_list,\n        curRepoID: res.data.repo_list.length > 0 ? res.data.repo_list[0].id : 0,\n      }, () => {\n        this.updateContent();\n        this.updateDirentTree();\n      })\n    }).catch(e => {\n\n    });\n  }\n\n  updateContent = () => {\n    let { curRepoID, curFilePath } = this.state;\n    api.getRepoFile(curRepoID, curFilePath).then(res => {\n      let newContent = res.data.content;\n      if (!curFilePath.endsWith('.md')) {\n        let tmpArr = curFilePath.split('.');\n        let extention = tmpArr[tmpArr.length-1];\n        newContent = \"```\" + extention + \"\\n\" + newContent + \"\\n```\";\n      }\n      let toc = [];\n      // only render level 2 and 3\n      res.data.toc.filter(item => {\n        return item.level === 2 || item.level === 3;\n      }).map(item => {\n        if (item.level === 2) {\n          let itemWithChildren = item;\n          itemWithChildren.children = [];\n          toc.push(itemWithChildren)\n          return;\n        } else if (item.level === 3) {\n          toc[toc.length-1].children.push(item);\n          return;\n        }\n      })\n\n      this.setState({\n        fileContent: newContent,\n        toc: toc,\n      })\n    });\n  }\n\n  updateDirentTree = () => {\n    let { curRepoID } = this.state;\n    api.getRepoDirentTree(curRepoID).then(res => {\n      this.setState({\n        direntTree: res.data.dirent_tree,\n      })\n    });\n  }\n\n  updateCurFilePath = (newPath) => {\n    console.log('in updateCurFilePath newPath = ', newPath)\n    this.setState({\n      curFilePath: newPath,\n    }, () => {\n      this.updateContent();\n    })\n  }\n\n  updateCurRepoID = (newID) => {\n    this.setState({\n      curRepoID: newID,\n    }, () => {\n      this.updateContent();\n      this.updateDirentTree();\n    })\n  }\n\n\n  render () {\n    let { repoList, curRepoID, fileContent, direntTree, toc } = this.state;\n    return (\n      <Layout>\n        <MyHeader\n          curRepoID={curRepoID}\n          repoList={repoList}\n          updateCurRepoID={this.updateCurRepoID}\n        />\n          <Layout>\n            {curRepoID > 0 &&\n              <MySider\n                updateCurFilePath={this.updateCurFilePath}\n                curRepoID={curRepoID}\n                direntTree={direntTree}\n              />\n            }\n            <Layout style={{ padding: '0 24px 24px' }}>\n              {curRepoID > 0 &&\n                <MyContent\n                  fileContent={fileContent}\n                />\n              }\n            </Layout>\n            {curRepoID > 0 &&\n              <TOC toc={toc}/>\n            } \n          </Layout>\n          <Footer style={{ textAlign: 'center' }}>Ant Design ©2018 Created by Ant UED</Footer>\n      </Layout>\n      )\n    }\n}\n\n\nexport default Home;","import { Form, Input, Button } from 'antd';\n\nimport api from '../api';\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 8,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 8,\n    span: 8,\n  },\n};\n\nconst Login = () => {\n  const onFinish = (values) => {\n    let searchParams = new URLSearchParams(window.location.search);\n    let next = searchParams.get('next');\n    const { username, password } = values;\n    api.login(username, password, next);\n  };\n\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo);\n  };\n\n  return (\n    <Form\n      {...layout}\n      name=\"basic\"\n      initialValues={{\n        remember: true,\n      }}\n      onFinish={onFinish}\n      onFinishFailed={onFinishFailed}\n      style={{ marginTop: '100px' }}\n    >\n      <Form.Item\n        label=\"Username\"\n        name=\"username\"\n        rules={[\n          {\n            required: true,\n            message: 'Please input your username!',\n          },\n        ]}\n      >\n        <Input />\n      </Form.Item>\n\n      <Form.Item\n        label=\"Password\"\n        name=\"password\"\n        rules={[\n          {\n            required: true,\n            message: 'Please input your password!',\n          },\n        ]}\n      >\n        <Input.Password />\n      </Form.Item>\n\n      {/* <Form.Item {...tailLayout} name=\"remember\" valuePropName=\"checked\">\n        <Checkbox>Remember me</Checkbox>\n      </Form.Item> */}\n\n      <Form.Item {...tailLayout}>\n        <Button type=\"primary\" htmlType=\"submit\">\n          Submit\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n};\n\n\nexport default Login;","\n\nconst util = {\n  getErrMsg: (error) => {\n    if (error.response) {\n      if (error.response.data && error.response.data.message) {\n        return error.response.data.message;\n      }\n      return error.response.statusText;\n    }\n    return 'network error';\n  },\n}\n\nexport default util;","import React from 'react';\n\nimport { Layout, notification, Button, Modal, Input, Row, Col, Alert } from 'antd';\n\nimport api from '../../api';\nimport util from '../../util';\n\nconst { Header } = Layout;\n\n\nconst MyHeader = (props) => {\n  const [visible, setVisible] = React.useState(false);\n  const [confirmLoading, setConfirmLoading] = React.useState(false);\n  const [repoName, setRepoName] = React.useState('');\n  const [repoURL, setRepoURL] = React.useState('');\n  const [errMsg, setErrMsg] = React.useState('');\n\n  const showModal = () => {\n    setVisible(true);\n  };\n\n  const handleNameChange = (e) => {\n    setRepoName(e.target.value);\n    setErrMsg('');\n  }\n\n  const handleRepoURLChange = (e) => {\n    setRepoURL(e.target.value);\n    setErrMsg('');\n  }\n\n  const addRepo = () => {\n    if (repoURL === '' || repoName === '') {\n      setErrMsg('name and url are required')\n      return;\n    }\n\n    setConfirmLoading(true);\n    api.adminAddRepo(repoName, repoURL).then(res => {\n      props.addRepo(res.data);\n      setVisible(false);\n      setConfirmLoading(false);\n      notification.success({message: 'repository added'})\n    }).catch(e => {\n      notification.error({message:util.getErrMsg(e)})\n    });\n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n  };\n    return (\n    <Header className=\"site-layout-background\" style={{ paddingLeft: '20px' }} >\n      <Button type=\"primary\" onClick={showModal}>\n        Add\n      </Button>\n      <Modal\n        title=\"Add a git repository\"\n        visible={visible}\n        onOk={addRepo}\n        confirmLoading={confirmLoading}\n        onCancel={handleCancel}\n      >\n        <Row>\n          <Col span={3}>\n            name\n          </Col>\n          <Col span={20}>\n            <Input onChange={handleNameChange} value={repoName} placeholder=\"display name\" style={{ marginBottom: '10px' }}></Input>\n          </Col>\n        </Row>\n        <Row>\n          <Col span={3}>\n            url\n          </Col>\n          <Col span={20}>\n            <Input onChange={handleRepoURLChange} value={repoURL} placeholder=\"url of git repo\"></Input>\n          </Col>\n        </Row>\n        {errMsg && <Alert message={errMsg} type=\"error\" style={{marginTop: '15px'}} />}\n      </Modal>\n    </Header>\n    )\n}\n\nexport default MyHeader;","class AdminRepo {\n  constructor(repo) {\n    let obj = new Object();\n    obj.key = repo.id;\n    obj.name = repo.name;\n    obj.url = repo.url;\n    return obj;\n  }\n}\nexport default AdminRepo;","import React from 'react';\nimport { Modal, Row, Col, Input, Alert } from 'antd';\n\nclass ModalUpdateRepo extends React.Component {\n\n  constructor (props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      repoURL: '',\n      errMsg: ''\n    }\n  }\n  \n\n  componentDidMount() {\n    console.log('in mounttututut this.props = ', this.props)\n    this.setState({\n      repoName: this.props.repoToUpdate.name,\n      repoURL: this.props.repoToUpdate.url,\n    })\n  }\n\n  updateRepo = () => {\n    let { repoName, repoURL } = this.state;\n    this.props.updateRepo(this.props.repoToUpdate.key, repoName, repoURL);\n  }\n\n  handleNameChange = (e) => {\n    this.setState({\n      repoName: e.target.value,\n      errMsg: '',\n    })\n  }\n\n  handleRepoURLChange = (e) => {\n    this.setState({\n      repoURL: e.target.value,\n      errMsg: '',\n    })\n  }\n\n    // let {  } = this.state;\n  render() {\n    console.log('renrenrnernenrender')\n    console.log('this.state = ', this.state)\n    let { repoName, repoURL, errMsg } = this.state;\n    return (\n      <div>\n        <Modal\n          title=\"Update a git repository\"\n          visible={this.props.visible}\n          onOk={this.updateRepo}\n          confirmLoading={this.props.confirmLoading}\n          onCancel={this.props.onCancel}\n        >\n        <Row>\n          <Col span={3}>\n            name\n          </Col>\n          <Col span={20}>\n            <Input onChange={this.handleNameChange} value={repoName} style={{ marginBottom: '10px' }}></Input>\n          </Col>\n        </Row>\n        <Row>\n          <Col span={3}>\n            url\n          </Col>\n          <Col span={20}>\n            <Input onChange={this.handleRepoURLChange} value={repoURL} ></Input>\n          </Col>\n        </Row>\n        {errMsg && <Alert message={errMsg} type=\"error\" style={{marginTop: '15px'}} />}\n\n        </Modal>\n      </div>\n    )\n  }\n}\n\nexport default ModalUpdateRepo;\n","import React from 'react';\nimport { Table, Space, Layout, notification } from 'antd';\nimport RepoHeader from './repo-header';\n\nimport AdminRepo from '../../models/admin-repo';\nimport ModalUpdateRepo from './moddal-update-repo';\nimport api from '../../api';\nimport util from '../../util';\n\nconst { Column } = Table;\nconst { Content } = Layout;\n\n\nclass Repos extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n      isShowUpdateRepo: false,\n      modalUpdateConfirmLoading: false,\n      repoToUpdate: null,\n    };\n  }\n\n  componentDidMount() {\n    api.adminListRepos(0,0).then(res => {\n      this.setState({\n        repoList: res.data.repo_list.map(item => new AdminRepo(item)),\n      })\n    }).catch(e => {\n      notification.error({message: util.getErrMsg(e)});\n    })\n  }\n\n\n  addRepo = (repo) => {\n    this.setState({repoList: [...this.state.repoList, new AdminRepo(repo)]});\n  }\n\n  deleteRepo = (repo) => {\n    api.adminDeleteRepo(repo.key).then(res => {\n      let newRepoList = this.state.repoList.filter(item => item.key !== repo.key);\n      this.setState({\n        repoList: newRepoList,\n      })\n      notification.success({message: 'repository deleted'});\n    }).catch(e => {\n      console.log(e)\n      notification.error({message: util.getErrMsg(e)});\n    })\n  }\n\n  updateRepo = (id, name, url) => {\n    api.adminUpdateRepo(id, name, url).then(res => {\n      let newRepo = new AdminRepo(res.data);\n      let repos = [...this.state.repoList];\n      repos.forEach(repo => {\n        if (repo.key === id) {\n          repo.name = newRepo.name;\n          repo.url = newRepo.url;\n        }\n      })\n      this.setState({\n        repoList:repos,\n        isShowUpdateRepo: false,\n        modalUpdateConfirmLoading: false,\n      })\n      notification.success({message: 'repository updated'});\n\n\n    }).catch(e => {\n      notification.error({message: util.getErrMsg(e)});\n    });\n  }\n\n  cancelUpdateModal = () => {\n    console.log('in cancal')\n    this.setState({isShowUpdateRepo: false});\n  }\n  showModalUpdateRepo = (repo) => {\n    this.setState({\n      repoToUpdate: repo,\n    }, () => {\n      this.setState({\n        isShowUpdateRepo: true,\n      })\n    });\n  }\n\n  render () {\n    let { repoList, isShowUpdateRepo, modalUpdateConfirmLoading, repoToUpdate } = this.state;\n    return (\n      <div>\n        <RepoHeader\n          addRepo={this.addRepo}\n        />\n        <Content style={{ margin: '0 16px', paddingTop: '20px' }}>\n          <Table dataSource={repoList} pagination={false}>\n            <Column title=\"Name\" dataIndex=\"name\" key=\"name\" />\n            <Column title=\"URL\" dataIndex=\"url\" key=\"url\" />\n            <Column\n              title=\"Action\"\n              key=\"action\"\n              render={(repo, record) => {\n                return (\n                <Space size=\"middle\" key={repo.key}>\n                  <a onClick={() => this.showModalUpdateRepo(repo)}>Update</a>\n                  <a onClick={() => this.deleteRepo(repo)}>Delete</a>\n                </Space>)\n              }}\n            />\n          </Table>\n        </Content>\n        {isShowUpdateRepo &&\n          <ModalUpdateRepo\n            visible={isShowUpdateRepo}\n            updateRepo={this.updateRepo}\n            confirmLoading={modalUpdateConfirmLoading}\n            onCancel={this.cancelUpdateModal}\n            repoToUpdate={repoToUpdate}\n          ></ModalUpdateRepo>\n        }\n      </div>\n    )\n  }\n}\n\nexport default Repos;\n","\nimport React from 'react';\nimport { Layout, Menu } from 'antd';\nimport {\n  AppstoreAddOutlined,\n} from '@ant-design/icons';\n\nimport Repos from './repos';\n\n\nimport '../../css/admin-admin.css';\n\nconst { Footer, Sider } = Layout;\n\nclass Admin extends React.Component {\n  state = {\n    collapsed: false,\n\n  };\n\n  onCollapse = collapsed => {\n    console.log(collapsed);\n    this.setState({ collapsed });\n  };\n\n  render() {\n    const { collapsed } = this.state;\n    return (\n      <Layout style={{ minHeight: '100vh' }}>\n        <Sider collapsible collapsed={collapsed} onCollapse={this.onCollapse}>\n          <div className=\"admin-logo\" />\n          <Menu theme=\"dark\" defaultSelectedKeys={['1']} mode=\"inline\">\n            <Menu.Item key=\"1\" icon={<AppstoreAddOutlined />}>\n              Repositories\n            </Menu.Item>\n          </Menu>\n        </Sider>\n        <Layout className=\"site-layout\">\n          <Repos/>\n          <Footer style={{ textAlign: 'center' }}>Ant Design ©2018 Created by Ant UED</Footer>\n        </Layout>\n      </Layout>\n    );\n  }\n}\n\nexport default Admin;","\nimport React from 'react';\nimport Home from './page/home';\nimport Login from './page/login';\n\nimport Admin from './page/admin/admin';\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      route: window.location.pathname\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener('hashchange', () => {\n      this.setState({\n        route: window.location.pathname\n      })\n    })\n  }\n\n  render () {\n    console.log(\"this.staete = \", this.state)\n    let Child;\n    switch (this.state.route) {\n      case '/': Child = Home; break;\n      case '/admin': Child = Admin; break;\n      case '/login': Child = Login; break;\n      default:      Child = Home;\n    }\n\n    return (\n      <div className=\"App\">\n        <Child/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport 'antd/dist/antd.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}